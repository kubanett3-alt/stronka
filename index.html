<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OBSCURA // ADMIN</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body class="login-page">
    <canvas id="bgCanvas"></canvas>

    <div class="login-card" id="loginCard">
        <div class="logo-section">
            <div class="logo-hex">⬡</div>
            <div class="logo-name">OBSCURA</div>
            <div class="logo-line"></div>
            <div class="logo-sub">ADMIN TERMINAL v2.0</div>
        </div>

        <div class="form-group">
            <label class="field-label">IDENTYFIKATOR</label>
            <input type="text" id="adminUser" class="field-input" autocomplete="off" spellcheck="false" />
        </div>
        <div class="form-group">
            <label class="field-label">HASŁO DOSTĘPU</label>
            <input type="password" id="adminPass" class="field-input" />
        </div>

        <div id="loginError" class="error-msg" style="display:none">BŁĄD UWIERZYTELNIENIA</div>

        <button class="btn-primary" onclick="doLogin()" id="loginBtn">UWIERZYTELNIJ</button>
        <p class="footer-label">PANEL ZARZĄDZANIA OBSCURA</p>
    </div>

    <script>
        // ── Particle canvas ──────────────────────────────────────
        const canvas = document.getElementById('bgCanvas');
        const ctx = canvas.getContext('2d');
        let W, H, particles = [], lines = [];

        function resize() {
            W = canvas.width = innerWidth;
            H = canvas.height = innerHeight;
        }
        resize();
        window.addEventListener('resize', resize);

        class Particle {
            constructor() { this.reset(); }
            reset() {
                this.x = Math.random() * W;
                this.y = Math.random() * H;
                this.vx = (Math.random() - 0.5) * 0.4;
                this.vy = (Math.random() - 0.5) * 0.4;
                this.size = Math.random() * 1.5 + 0.5;
                this.alpha = Math.random() * 0.4 + 0.1;
                this.color = Math.random() > 0.7 ? '#4488ff' : '#ffffff';
            }
            update() {
                this.x += this.vx; this.y += this.vy;
                if (this.x < 0 || this.x > W || this.y < 0 || this.y > H) this.reset();
            }
            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
        }

        for (let i = 0; i < 120; i++) particles.push(new Particle());

        function drawConnections() {
            for (let i = 0; i < particles.length; i++) {
                for (let j = i + 1; j < particles.length; j++) {
                    const dx = particles[i].x - particles[j].x;
                    const dy = particles[i].y - particles[j].y;
                    const d = Math.sqrt(dx * dx + dy * dy);
                    if (d < 140) {
                        ctx.save();
                        ctx.globalAlpha = (1 - d / 140) * 0.12;
                        ctx.strokeStyle = '#4488ff';
                        ctx.lineWidth = 0.5;
                        ctx.beginPath();
                        ctx.moveTo(particles[i].x, particles[i].y);
                        ctx.lineTo(particles[j].x, particles[j].y);
                        ctx.stroke();
                        ctx.restore();
                    }
                }
            }
        }

        // Grid lines
        function drawGrid() {
            ctx.save();
            ctx.strokeStyle = 'rgba(68,136,255,0.04)';
            ctx.lineWidth = 1;
            for (let x = 0; x < W; x += 80) {
                ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, H); ctx.stroke();
            }
            for (let y = 0; y < H; y += 80) {
                ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(W, y); ctx.stroke();
            }
            ctx.restore();
        }

        function animate() {
            ctx.clearRect(0, 0, W, H);
            drawGrid();
            particles.forEach(p => { p.update(); p.draw(); });
            drawConnections();
            requestAnimationFrame(animate);
        }
        animate();

        // ── Login logic ──────────────────────────────────────────
        function doLogin() {
            const u = document.getElementById('adminUser').value;
            const p = document.getElementById('adminPass').value;
            const btn = document.getElementById('loginBtn');
            const err = document.getElementById('loginError');

            err.style.display = 'none';
            btn.textContent = 'UWIERZYTELNIANIE...';
            btn.disabled = true;

            setTimeout(() => {
                if (u === 'admin' && p === 'admin') {
                    const card = document.getElementById('loginCard');
                    card.style.animation = 'slideUp 0.4s cubic-bezier(0.4,0,1,1) forwards';
                    setTimeout(() => { window.location.href = 'dashboard.html'; }, 430);
                } else {
                    err.style.display = 'block';
                    const card = document.getElementById('loginCard');
                    card.style.animation = 'shake 0.4s ease';
                    setTimeout(() => { card.style.animation = ''; }, 410);
                    btn.textContent = 'UWIERZYTELNIJ';
                    btn.disabled = false;
                }
            }, 600); // simulate auth delay
        }
        document.addEventListener('keydown', e => { if (e.key === 'Enter') doLogin(); });
    </script>
</body>

</html>